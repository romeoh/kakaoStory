var allCount,lists=[],lastMan,isRotate=!1;window.addEventListener("DOMContentLoaded",initPage,!1);
function initPage(){allCount=parseInt(M("[data-setting]").data("setting"),10);setDefault(allCount);setButtons();M("[data-enter]").on("blur",function(a,b){var c=b.data("enter");M('[data-entry="'+c+'"]').text(b.val())});M("#title").on("change",function(a,b){"\uc9c1\uc811\uc785\ub825"===b.val()?M("#inputTitle").css("display","inline-block"):M("#inputTitle").css("display","none")});M("#turn").on("click",turn);M("#btnStory").on("click",executeKakaoStoryLink);M("#btnKakao").on("click",executeURLLink)}
function turn(){if(isRotate)return!1;M("#rouletteBox").attr("style","");M("#resultInfo").css("display","none");for(var a=lists.length=0;a<allCount;a++)if(""===M('[data-input="'+(a+1)+'"] input').val())return alert("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."),!1;if("-1"===M("#title").val())return alert("\ud0c0\uc774\ud2c0\uc744 \uc120\ud0dd\ud558\uc138\uc694."),!1;if("\uc9c1\uc811\uc785\ub825"===M("#title").val()&&""===M("#inputTitle").val())return alert("\ud0c0\uc774\ud2c0\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uc138\uc694."),
!1;isRotate=!0;M("#rouletteBox").css("rotate","0deg");setTimeout(function(){var a=getRandom(3240,3600);M("#rouletteBox").animate({rotate:a+"deg",time:"4000ms"},function(c,d){for(var e=0;e<allCount;e++)lists.push(M('[data-enter="'+(e+1)+'"]').val());isRotate=!1;result=a-3240;d.attr("style","").css("rotate",result+"deg");2===allCount&&(lastMan=88<=result&&270>result?lists[1]:lists[0]);3===allCount&&(lastMan=90<=result&&210>result?lists[1]:210<=result&&330>result?lists[2]:lists[0]);4===allCount&&(lastMan=
134<=result&&225>result?lists[1]:225<=result&&314>result?lists[2]:44<=result&&314>result?lists[3]:lists[0]);5===allCount&&(lastMan=217<=result&&288>result?lists[1]:71<=result&&142>result?lists[2]:142<=result&&216>result?lists[3]:0<=result&&70>result?lists[4]:lists[0]);6===allCount&&(lastMan=150<=result&&210>result?lists[1]:29<=result&&88>result?lists[2]:88<=result&&149>result?lists[3]:211<=result&&270>result?lists[5]:270<=result&&330>result?lists[0]:lists[4]);7===allCount&&(lastMan=51<=result&&101>
result?lists[0]:0<=result&&50>result?lists[2]:258<=result&&308>result?lists[3]:154<=result&&206>result?lists[4]:102<=result&&154>result?lists[5]:206<=result&&258>result?lists[6]:lists[1]);8===allCount&&(lastMan=0<=result&&43>result?lists[0]:271<=result&&315>result?lists[1]:226<=result&&271>result?lists[3]:89<=result&&134>result?lists[4]:44<=result&&89>result?lists[5]:180<=result&&226>result?lists[6]:134<=result&&180>result?lists[7]:lists[2]);M("#resultInfo").css("display","block").text(lastMan+"\ub2d8\uc774 \ub2f9\ucca8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")})},
10)}function setDefault(a){for(var b=0;b<a;b++)M('[data-button-box="'+b+'"]').css("display","none");for(b=a+1;9>b;b++)M('[data-input="'+b+'"]').css("display","none");M('[data-button-box="'+a+'"]').css("display","");M("#roulette").attr("src","../imgApp/bg_circle"+a+".png");M("#entry").attr("class","").addClass("entry").addClass("pp"+a)}
function setButtons(){M("[data-minus]").on("click",function(a,b){if(2==allCount)return!1;allCount=parseInt(b.data("minus"),10)-1;setDefault(allCount)});M("[data-plus]").on("click",function(a,b){if(8==allCount)return!1;allCount=parseInt(b.data("plus"),10)+1;M('[data-input="'+allCount+'"]').css("display","block");setDefault(allCount)})}
function executeKakaoStoryLink(){var a="",b="",c="";if(0===lists.length)return!1;for(var c="\uc9c1\uc811\uc785\ub825"===M("#title").val()?M("#inputTitle").val():M("#title").val(),d=0;d<allCount;d++)b+=", "+lists[d];a=a+"[\uc6d0\ud310\ub3cc\ub9ac\uae30]\n\n"+(b.replace(", ","")+" \uc911\uc5d0\uc11c\n");a+=c+"\n";a+=lastMan+" \uc785\ub2c8\ub2e4.\n\n";a+="http://goo.gl/Gpld3p";urlMsg={title:"\uc6d0\ud310\ub3cc\ub9ac\uae30",desc:lastMan+"\ub2d8\uc740 \uacb0\uacfc\ub97c \uacb8\ud5c8\ud788 \ubc1b\uc544\ub4e4\uc774\uc2dc\uc624!",
imageurl:["http://romeoh.github.io/kakaoStory/img/circle.png"],type:"article"};console.log(a,urlMsg);kakao.link("story").send({post:a,appid:"funnyApp",appver:"1.0",appname:"\uae68\uc54c\uc720\uba38:",urlinfo:JSON.stringify(urlMsg)});showad()}function executeURLLink(){kakao.link("talk").send({msg:"\uc6d0\ud310\ub3cc\ub9ac\uae30",url:"http://goo.gl/Gpld3p",appid:"funnyApp",appver:"1.0",appname:"\uae68\uc54c\uc720\uba38:",type:"link"})}
function getRandom(a,b){return Math.floor(Math.random()*(b-a)+a)};